<div class="container-fluid" id="top">
    <!-- header -->
    <div class="d-flex justify-content-between align-items-center mb-1">
        <div class="users-header mt-2">
            <p class="m-0">Total Client Orders - <span>{{clientData?.length}}</span></p>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-1">
            <div class="users-header">
                <!-- <p class=" heading m-0">Client Requests </p> -->
            </div>
            <div class="d-flex">
                <!-- <div class="mx-2">
            <button mat-flat-button color="primary" class="py-0" (click)="openSitesDialog()">Site Entry</button>
        </div>
        <div class="mx-2">
            <button mat-flat-button color="primary" class="py-0" (click)="openTasksDialog()">View Tasks</button>
        </div> -->
                <div class="mx-2">
                    <button class="create-btn" (click)="showing('frKit')">Create Client Order</button>
                </div>
                <!-- <div class="mx-2">
            <button class="create-btn" (click)="show('add')">My Cart</button>
        </div> -->
            </div>
        </div>
    </div>
    <!-- form -->
    <div class="">
        <!-- <div class="row">
        <div class="col-lg-3 col-sm-12">
        <mat-form-field appearance="outline" class="w-100">
            <mat-label>Site Name</mat-label>
            <mat-select [(ngModel)]="siteNg">
            <mat-option value="All" (click)="filterSites('All')">All</mat-option>
              <mat-option *ngFor="let data of siteIds" (click)="filterSites(data.sitename)" [value]="data.sitename">{{  data.siteid }} - {{ data.siteShortName }}</mat-option>
            </mat-select>
        </mat-form-field>
        </div> -->
        <div class="col-lg-3 col-sm-12">
            <mat-form-field class="example-form-field" appearance="outline" class="w-100">
                <mat-label>Search</mat-label>
                <input matInput type="text" [(ngModel)]="searchText">
                <button matSuffix mat-icon-button>
                    <mat-icon>search</mat-icon>
                </button>
            </mat-form-field>
        </div>
        <!--
        <div class="col-lg-7 mt-2">
        <div class="d-flex justify-content-end">
            <div>
            <button class="filter-btn m-1" (click)="openStatusItems(user?.UserId, null)">Instock</button>
            </div>
            <div>
            <button class="filter-btn m-1" (click)="openStatusItems(user?.UserId, 1)">Requested</button>
            </div>
            <div>
            <button class="filter-btn m-1" (click)="openStatusItems(user?.UserId, 2)">Dispatched</button>
            </div>
            <div>
            <button class="filter-btn m-1" (click)="openStatusItems(user?.UserId, 5)">Removed</button>
            </div>
        </div>
        </div>
    </div> -->
    </div>
    <!-- table -->
    <div class="table-resp mt-1">
        <table class="table table-hover" id="mytable">
            <thead>
                <tr class="form1">
                    <th>
                        <p class="d-inline-flex">
                            <span>Id</span>
                            <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                        </p>
                    </th>
                    <th>
                        <span>Item Name</span>
                        <img (click)="sort('clothType')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>
                    <th>
                        <span>Color</span>
                        <img (click)="sort('color')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>
                    <th>
                        <p class="d-inline-flex">
                            <span>ColorCode</span>
                            <img (click)="sort('colorCode')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                        </p>
                    </th>
                    <th>
                        <p class="d-inline-flex">
                            <span class="text-center">Quantity</span>
                            <img (click)="sort('quantity')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                        </p>
                    </th>
                    <th>
                        <p class="text-center">AssignedQty</p>
                        <img (click)="sort('assignedQuantity')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>
                    <th>
                        <p class="d-inline-flex">
                            <span>SareeLength</span>
                            <img (click)="sort('sareeLength')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                        </p>
                    </th>
                    <th>
                        <p class="d-inline-flex">
                            <span>Created Date</span>
                            <img (click)="sort('deadline')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                        </p>
                    </th>
                    <th>
                        <p class="d-inline-flex">
                            <span>Deadline</span>
                            <img (click)="sort('deadline')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                        </p>
                    </th>
                    <!-- <th>
                        <p class="d-inline-flex">
                            <span>CreatedBy</span>
                            <img (click)="sort('createdBy')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                        </p>
                    </th> -->
                    <th>
                        <span class="text-center">BorderColorCode</span>
                        <img (click)="sort('borderColorCode')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>
                    <th>Weaver Details</th>
                    <th class="text-center">Customer Details</th>
                    <th>
                        <p class="d-inline-flex">
                            <span>Actons</span>
                        </p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let cust of clientData | search:searchText; let i = index">
                    <td>
                        <p>{{ cust.id }}</p>
                    </td>
                    <td>
                        <p>{{cust.clothType}}</p>
                    </td>
                    <td>
                        <p>{{ cust.color }}</p>
                    </td>
                    <td>
                        <p>{{ cust.colorCode }}</p>
                    </td>
                    <td>
                        <p>{{ cust.quantity }}</p>
                    </td>
                    <td>
                        <p>{{cust.assignedQuantity}}</p>
                    </td>
                    <td>
                        <p>{{cust.sareeLength ? cust.sareeLength : '-' }}</p>
                    </td>
                    <td><p>{{cust.createdTime | date:'mediumDate'}}</p></td>
                    <td>
                        <p>{{ cust.deadline ? cust.deadline : '-'}}</p>
                    </td>
                    <!-- <td>
                        <p>{{ cust.createdBy }}</p>
                    </td> -->
                    <td>
                        <p>{{ cust.borderColorCode ? cust.borderColorCode : '-' }}</p>
                    </td>
                    <!-- <td
                        [style.color]="cust.type == 'Custom Order' ? '#00573c' :  cust.type == 'Order' ? '#000000' : '' ">
                        <p>{{ cust.type }}</p>
                    </td> -->
                    <td matTooltip="weaver Details" class="text-center" (click)="openClient(cust)">View</td>
                    <td class="text-secondary pointer text-center">
                        <button mat-button [matMenuTriggerFor]="menu" (click)="open(cust)" matTooltip="Customer Details">View</button>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item>Name:{{final?.clientName}}</button>
                            <button mat-menu-item>Mobile:{{final?.mobileNumber}}</button>
                        </mat-menu>
                    </td>
                    <td>
                        <ng-container>
                            <button class="assign-button"  [disabled]="cust.assignedQuantity === cust.quantity" 
                            [ngClass]="{'assign': cust.assignedQuantity === 0, 'partially-assigned-button': cust.assignedQuantity > 0 && cust.assignedQuantity < cust.quantity, 
                                'assigned-button': cust.assignedQuantity === cust.quantity }" 
                                (click)="show('showIndent', cust)">
                            {{ 
                                cust.assignedQuantity === cust.quantity ? 'Assigned' : 
                                (cust.assignedQuantity > 0 ? 'Partially Assigned' :  'Assign') 
                            }}
                            
                            </button>
                        </ng-container>
                        
                    </td>
            </tbody>
        </table>
    </div>
    <!-- error info -->
    <div class="d-flex align-items-center justify-content-center" style="height: 50vh;" *ngIf="errInfo">
        <h1 class="text-secondary">{{ errInfo }}</h1>
    </div>
    <!-- loader -->
    <div *ngIf="showLoader">
        <app-loader class="d-flex justify-content-center align-items-center" style="height: 50vh;"></app-loader>
    </div>
    <!-- No Data -->
    <div class="d-flex justify-content-center align-items-center" style="height: 50vh;" *ngIf="clientData?.length == 0 && !showLoader">
    <h1>No Data</h1>
    </div>
</div>

<div *ngIf="showIndent">
    <app-add-new-indent [data]="crdId"
        (newItemEvent)="closenow('showIndent') ; listClientRequestDetails();"></app-add-new-indent>
</div>
<div *ngIf="showFrkit">
    <app-add-new-frkit (newItemEvent)="closenoww('frKit'); listClientRequestDetails();"></app-add-new-frkit>
</div>
<!-- <div *ngIf="showDcFr">
    <app-add-new-dc [show]="'fromFr'" (newItemEvent)="closenow('showDcFr')"></app-add-new-dc>
</div> -->

<ng-template #viewSitesDialog>
    <div style="background-color: #00573c;">
        <p class="dialog-title">Send</p>
    </div>
    <div class="row dialog-content">
        <div class="col-lg-12 col-md-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Id</mat-label>
                <mat-select [(ngModel)]="assignedObj.id" multiple>
                    <mat-option *ngFor="let item of statusItems" [value]="item.id">{{item.itemCode}} -
                        {{item.id}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Status</mat-label>
                <mat-select [(ngModel)]="assignedObj.statusId">
                    <ng-container *ngFor="let item of Weavers_Inventory_Status">
                        <mat-option [value]="item.keyId" *ngIf="item.keyId== 2">{{item.value}}</mat-option>
                    </ng-container>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <div class="d-flex align-items-center justify-content-end">
        <div>
            <button class="dialog-close-btn" mat-dialog-close>Close</button>
        </div>
        <div>
            <button class="dialog-close-btn" mat-dialog-close
                (click)="updateInventoryStatusForFGSending()">Send</button>
        </div>
    </div>
</ng-template>

<ng-template #ItemsDialog>
    <!-- <div style="background-color: #053d1c;">
    <p class="dialog-title">GRN</p>
    </div> -->
    <div class="dialog-content">
    <div class="table-res mx-2 mt-3">
        <table class="table" id="mytable">
        <thead>
            <tr>
            <!-- <th>Id</th> -->
            <th>WeaverId</th>
            <th><p>WeaverName</p></th>
            <th><p>MachineNo</p></th>
            <th>Expected Date</th>
            <th>Issued Date</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of dc | removeDuplicates:'weaverId' let i = index">
                <!-- <td>{{task.id}}</td> -->
                <td>
                    <p>{{ task.weaverId }}</p>
                </td>
                <td>
                <p>{{ task.weaverName }}</p>
            </td>
            <td>{{task.machineNoAliasInventoryId}}</td>
                <td>{{task.expectedDate}}</td>
                <td>{{task.createdTime}}</td>
            </tr>
        </tbody>
        </table>
    </div>
    </div>
    <div class="d-flex justify-content-center align-items-center"  *ngIf="dc.length === 0">
        <p>Not assigned to weavers</p>
    </div>
    <div class="d-flex justify-content-end">
    <button class="dialog-close-btn" mat-dialog-close>Close</button>
    </div>

    
</ng-template>

<!-- <ng-template #usedItemsDialog>
    <div style="background-color: #04442e;">
    <p class="dialog-title">Customer Details</p>
    </div>
    <div class="dialog-content">
    <div class="table-res">
        <table class="table" id="mytable">
        <thead>
            <tr class="task-table">
            <th>ClientName</th>
            <th>EmailId</th>
            <th>Mobile Number</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of final; let i = index">
            <td>
                <p>{{ task.clientName }}</p>
            </td>
            <td>
                <p>{{ task.emailId }}</p>
            </td>
            <td>
                <p>{{ task.mobileNumber }}</p>
            </td>
            </tr>
        </tbody>
        </table>
    </div>
    </div>
    <div class="d-flex justify-content-end">
    <button class="dialog-close-btn" mat-dialog-close>Close</button>
    </div>
</ng-template> -->